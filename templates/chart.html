<html>
<head>
<title>Contributors Stats</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.0/moment-with-locales.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script src="https://codepen.io/anon/pen/aWapBE.js"></script>
<script type="text/javascript">

function doStuff() {
  var ctx = document.getElementById('myChart').getContext('2d');
  var my_palette = palette('rainbow', {{ labels_and_data|length }});
  var chart = new Chart(ctx, {
      // The type of chart we want to create
      type: 'line',

      // The data for our dataset
      data: {
          datasets: [
            {% for ld in labels_and_data -%}
                {
                    label: "{{ ld.label }}",
                    borderColor: '#' + my_palette[{{ loop.index0}}],
                    backgroundColor: 'rgba(0, 0, 0, 0.0)',
                    data: [
                      {% for d in ld.data -%}
                      {% if loop.index == 1 or loop.index == ld.data|length or loop.index % max_points_divide_factor == 0 -%}
                      {
                        x: new Date({{ d.year }}, {{ d.month }}, {{ d.day }}, {{ d.hours }}, {{ d.minutes }}, {{ d.seconds }}),
                        y: {{ d.y }}
                      }{%- if loop.index < ld.data|length -%},{% endif %}
                      {%- endif %}
                      {%- endfor %}
                    ]
                }{%- if loop.index < labels_and_data|length -%},{% endif %}
            {%- endfor %}
          ]
      },

      // Configuration options go here
      options: {
        elements: {
          line: {
            tension: 0
          }
        },
        scales: {
          xAxes: [{
            type: 'time',
            time: {
              unit: 'month',
              unitStepSize: 1,
              displayFormats: {
                'month': 'MMM YYYY'
              }
            }
          }],
        },
      }
    });
  }
window.onload = doStuff;
</script>
</head>

<body style="font-family: Arial, Helvetica, sans-serif;">

<canvas id="myChart"></canvas>

<br/><br/>

Repositories:
<ul>
{% for repo in repositories -%}
<li>{{ repo }}</li>
{%- endfor %}
</ul>
<span style="font-size: 12px;">Generated on {{ generation_date }}</span>
</body>
</html>
